{% extends "layout.twig" %}

{% block title %}Annonces{% endblock title %}

{% block content %}

	<ol class="breadcrumb">
		<li><a href="{{ path('homepage') }}">Accueil</a></li>
		<li class="active">Liste des annonces</li>
	</ol>
	
	<div class="well well-sm">
	
		<ul class="list-group">
			<li class="list-group-item">
				{% if paginator.totalItems == 1 %}
			        <strong>1</strong> annonce trouvée.
			    {% else %}
			        <strong>{{ paginator.totalItems }}</strong> annonces trouvées.
			    {% endif %}
			
			    Montre <strong>{{ paginator.currentPageFirstItem }} - {{ paginator.currentPageLastItem }}</strong>.
		    </li>
		    <li class="list-group-item">
		    	<a href="{{ path('annonce.add') }}">Ajouter une annonce</a>
		    </li>
		 </ul>

		{{ paginator|raw }}
	    
		<table class="table table-striped table-bordered table-condensed table-hover">
			<thead>
				<tr>
					<th>
						{% if app.request.get('order_dir') == 'ASC' and app.request.get('order_by') == 'id' %}
							<a href="{{ path('annonce.list', {'order_by': 'id', 'order_dir': 'DESC'}) }}">
						{%  else %}
							<a href="{{ path('annonce.list', {'order_by': 'id', 'order_dir': 'ASC'}) }}">
						{% endif %}
							#	
						{% if app.request.get('order_by') == 'id'  %}
							{% if app.request.get('order_dir') == 'ASC' %}
								<span class="caret"></span>
							{%else%}
									<span class="dropup">
    									<span class="caret"></span>
									</span>
								{% endif %}
						{% endif %}
						</a>
					</th>
					<th>
						{% if app.request.get('order_dir') == 'ASC' and app.request.get('order_by') == 'title' %}
							<a href="{{ path('annonce.list', {'order_by': 'title', 'order_dir': 'DESC'}) }}">
						{%  else %}
							<a href="{{ path('annonce.list', {'order_by': 'title', 'order_dir': 'ASC'}) }}">
						{% endif %}
							Titre
						{% if app.request.get('order_by') == 'title'  %}
							{% if app.request.get('order_dir') == 'ASC' %}
								<span class="caret"></span>
							{%else%}
									<span class="dropup">
    									<span class="caret"></span>
									</span>
								{% endif %}
						{% endif %}
						</a> 
					</th>
					<th>
						{% if app.request.get('order_dir') == 'ASC' and app.request.get('order_by') == 'creation_date' %}
							<a href="{{ path('annonce.list', {'order_by': 'creation_date', 'order_dir': 'DESC'}) }}">
						{%  else %}
							<a href="{{ path('annonce.list', {'order_by': 'creation_date', 'order_dir': 'ASC'}) }}">
						{% endif %}
							Date de création	
						{% if app.request.get('order_by') == 'creation_date'  %}
							{% if app.request.get('order_dir') == 'ASC' %}
								<span class="caret"></span>
							{%else%}
									<span class="dropup">
    									<span class="caret"></span>
									</span>
								{% endif %}
						{% endif %}
						</a> 
					</th>
					<th>Etat</th>
				</tr>
			</thead>
			<tbody>
				{% for annonce in annonces %}
					<tr>
						<td><a href="{{ path('annonce.update',{'index':annonce.id}) }}">{{ annonce.id }}</a></td>
						<td><a href="{{ path('annonce.detail',{'index':annonce.id}) }}">{{ annonce.title }}</a></td>
						<td>{{ annonce.creationDate|date('Y-m-d') }}</td>
						<td>{% if annonce.archive %}Archivé{% else %}<span class="text-success">Publié</span>{% endif %}</td>
					</tr>
				{% endfor %}
			</tbody>
		</table>
		
		{{ paginator|raw }}
		
	</div>

	
{% endblock %}