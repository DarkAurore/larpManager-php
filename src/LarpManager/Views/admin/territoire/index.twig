{% extends "layout.twig" %}

{% block content %}

<div class="well well-sm">
	<div class="row" ng-controller="TerritoireController">
		<div class="col-xs-3 col-md-3">
		
			<div class="panel panel-default">
				<div class="panel-heading">
					<h4>Liste des territoires</h4>
					<div class="btn-group" role="group" aria-label="...">
						<a 	class="btn btn-primary"
							href="#" 
							ng-click="refresh()"
							data-toggle="tooltip" data-placement="top"
							title="Rafraichir">
							<i class="fa fa-refresh"></i>
						</a>
						<a 	class="btn btn-default"
							href="#"
							data-toggle="tooltip" data-placement="top"
							title="Créer un nouveau territoire" 
							ng-click="new()">
							<i class="fa fa-plus"></i>
						</a>
		      			<div class="input-group">
		        			<span class="input-group-addon"><i class="fa fa-search"></i></span>
		        			<input ng-model="search" type="text" class="form-control" placeholder="Rechercher" />
		      			</div>
	      			</div>
				</div>
				<div class="panel-body">
					<div class="list-group">
						<div ng-repeat="territoire in territoires | filter:search | orderBy:'+nom'">
							<a 
								href="#" 
								class="list-group-item"
								ng-click="selectTerritoire(territoire)"
								>
								{[{ territoire.nom }]}
							</a>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="col-xs-9 col-md-9" ng-show="selected">

			<h2>
				<span editable-text="selected.nom"
					onaftersave="saveTerritoire(selected)"
					e-form="nomBtnForm">
					{[{ selected.nom || "non renseigné" }]}
				</span>
				<small>
					<a href="#" ng-click="nomBtnForm.$show()" ng-hide="nomBtnForm.$visible">
   						<i class="fa fa-pencil"></i>
					</a>
				</small>
			</h2>
	  					 
	  		<div class="header">
				<h5>Description</h5>
			</div>
			
			<p 	editable-textarea="selected.description"
				onaftersave="update(selected)"
				e-rows="10" 
				e-cols="90"
				e-form="descriptionBtnForm">
				{[{ selected.description }]}
				<a href="#" ng-click="descriptionBtnForm.$show()" ng-hide="descriptionBtnForm.$visible">
   					<i class="fa fa-pencil"></i>
				</a>
			</p>
			
			<div class="header">
				<h5>Informations politiques</h5>
			</div>
			
			<p>Capitale : 
				<span editable-text="selected.capitale"
					onaftersave="update(selected)"
					e-form="capitaleBtnForm">
					{[{ selected.capitale || "non renseigné" }]}
				</span>
				<a href="#" ng-click="capitaleBtnForm.$show()" ng-hide="capitaleBtnForm.$visible">
   					<i class="fa fa-pencil"></i>
				</a>
			</p>
			
			<p>Politique :
				<span editable-text="selected.politique"
					onaftersave="update(selected)"
					e-form="politiqueBtnForm">
					{[{ selected.politique || "non renseigné" }]}
				</span>
				<a href="#" ng-click="politiqueBtnForm.$show()" ng-hide="politiqueBtnForm.$visible">
   					<i class="fa fa-pencil"></i>
				</a>
			</p>
			
			<p>Dirigeant : 
				<span editable-text="selected.dirigeant"
					onaftersave="update(selected)"
					e-form="dirigeantBtnForm">
					{[{ selected.dirigeant || "non renseigné" }]}
				</span>
				<a href="#" ng-click="dirigeantBtnForm.$show()" ng-hide="dirigeantBtnForm.$visible">
   					<i class="fa fa-pencil"></i>
				</a>
			</p>
			
			<p>Population : 
				<span editable-text="selected.population"
					onaftersave="update(selected)"
					e-form="populationBtnForm">
					{[{ selected.population || "non renseigné" }]}
				</span>
				<a href="#" ng-click="populationBtnForm.$show()" ng-hide="populationBtnForm.$visible">
   					<i class="fa fa-pencil"></i>
				</a>
			</p>
			
			<p>Symbole :
				<span editable-text="selected.symbole"
					onaftersave="update(selected)"
					e-form="symboleBtnForm">
					{[{ selected.symbole || "non renseigné" }]}
				</span>
				<a href="#" ng-click="symboleBtnForm.$show()" ng-hide="symboleBtnForm.$visible">
   					<i class="fa fa-pencil"></i>
				</a>
			</p>
			
			<p>Niveau technologique :
				<span editable-text="selected.tech_level"
					onaftersave="update(selected)"
					e-form="techBtnForm">
					{[{ selected.tech_level || "non renseigné" }]}
				</span>
				<a href="#" ng-click="techLevelBtnForm.$show()" ng-hide="techLevelBtnForm.$visible">
   					<i class="fa fa-pencil"></i>
				</a>
			</p>
			
			<p>Type racial:
				<span editable-text="selected.type_racial"
					onaftersave="update(selected)"
					e-form="typeRacialBtnForm">
					{[{ selected.type_racial || "non renseigné" }]}
				</span>
				<a href="#" ng-click="typeRacialBtnForm.$show()" ng-hide="typeRacialBtnForm.$visible">
   					<i class="fa fa-pencil"></i>
				</a>
			</p>
			
			<p>Frontières :
				<span editable-text="selected.frontieres"
					onaftersave="update(selected)"
					e-form="frontieresBtnForm">
					{[{ selected.frontieres || "non renseigné" }]}
				</span>
				<a href="#" ng-click="frontieresBtnForm.$show()" ng-hide="frontieresBtnForm.$visible">
   					<i class="fa fa-pencil"></i>
				</a>
			</p>
			
			<div class="header">
				<h5>Religions</h5>
			</div>
			
			<div class="header">
				<h5>Langues</h5>
			</div>
			
			<div class="header">
				<h5>Economie</h5>
			</div>
			
			<div class="header">
				<h5>Interprétation</h5>
			</div>
			
			<p>Inspiration</p>
			<p>Armes de prédilection</p>
			<p>Vétements</p>
			<p>Noms masculins</p>
			<p>Noms Féminins</p>
						
						
			
				<div class="header">
					<h5>Chronologie</h5>
				</div>
				
				
  				<table class="table table-bordered table-hover table-condensed">
  					<thead>
	  					<tr>
	  						<th>Année</th>
	  						<th>Mois</th>
	  						<th>Jour</th>
	  						<th>Description</th>
	  						<th>Visibilité</th>
	  						<th>Edit</th>
	  					</tr>
	  				</thead>
	  				<tbody>
  					<tr ng-repeat="event in selected.chronologies">
  						<td>
	  						<span editable-number="event.year" 
	  							e-name="year" 
	  							e-form="rowform" 
	  							e-required>
  							{[{ event.year }]}
  							</span>
  						</td>
  						 <td>
	  						<span editable-number="event.month" 
	  							e-name="month" 
	  							e-form="rowform" 
	  							e-required>
  							{[{ event.month }]}
  							</span>
  						</td>
  						 <td>
	  						<span editable-number="event.day" 
	  							e-name="day" 
	  							e-form="rowform" 
	  							e-required>
  							{[{ event.day }]}
  							</span>
  						</td>
  						<td>
  							<span editable-textarea="event.description"
  							 	e-rows="7" e-cols="40" 
	  							e-name="description" 
	  							e-form="rowform"  
	  							e-required>
  							{[{ event.description }]}
  							</span>
  						</td>
  						<td>
  							<span editable-select="event.visibilite"
  								e-ng-options="s.value as s.text for s in EventVisiblite" 
	  							e-name="visibilite" 
	  							e-form="rowform"  
	  							e-required>
  							{[{ event.visibilite }]}
  							</span>
  						</td>
  						<td>
	  						<!-- form -->
					        <form 
					        	editable-form 
					        	name="rowform" 
					        	onaftersave="updateEvent(event)" 
					        	ng-show="rowform.$visible" 
					        	class="form-buttons form-inline" 
					        	shown="inserted == event">
					          <button type="submit" ng-disabled="rowform.$waiting" class="btn btn-primary">
					            <i class="fa fa-floppy-o"></i>
					          </button>
					          <button type="button" ng-disabled="rowform.$waiting" ng-click="rowform.$cancel()" class="btn btn-default">
					            <i class="fa fa-undo"></i>
					          </button>
					        </form>
					        <div class="buttons" ng-show="!rowform.$visible">
					          <button class="btn btn-primary" ng-click="rowform.$show()"><i class="fa fa-pencil"></i></button>
					          <button class="btn btn-danger" ng-click="removeEvent(event)"><i class="fa fa-times"></i></button>
					        </div>  
  						</td>
  					</tr>
  					</tbody>
  				</table>
  				
  				<button class="btn btn-default" ng-click="addEvent()">Ajouter un événement</button>
	  			
	  			
			<div class="header">
				<h5>Groupes liés</h5>
			</div>
		</div>
	</div>
</div>
	
{% endblock %}