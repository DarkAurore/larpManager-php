{% extends "layout.twig" %}

{% block title %}Groupes{% endblock title %}

{% block content %}

	<ol class="breadcrumb">
		<li><a href="{{ path('homepage') }}">Accueil</a></li>
		<li class="active">Liste des groupes</li>
	</ol>

	<div class="well well-sm">
	
		<ul class="list-group">
			<li class="list-group-item">
				{% if paginator.totalItems == 1 %}
		        	<strong>1</strong> groupe trouvé.
		    	{% else %}
		        	<strong>{{ paginator.totalItems }}</strong> groupes trouvés.
		    	{% endif %}
		
		    	Montre <strong>{{ paginator.currentPageFirstItem }} - {{ paginator.currentPageLastItem }}</strong>.
		   	</li>
		   	<li class="list-group-item">
		   		<a href="{{ path('groupe.add') }}">Ajouter un groupe</a>
		   	</li>
		   	<li class="list-group-item">
		   		<div class="list-group-item"><h6>Rechercher</h6></div>
		   		
		   		<form class="form" action="{{ path('groupe.admin.list') }}" method="POST" {{ form_enctype(form) }}>
					{% form_theme form 'Form/bootstrap_3_horizontal_layout.html.twig' %}
					{{ form(form) }}
		   		</form>
		   		<a href="{{ path('groupe.admin.list') }}">Reset</a>
		   	</li>
		</ul>
		 
		{{ paginator|raw }}
		 
		<table class="table table-striped table-bordered table-condensed table-hover">
			<thead>
				<tr>
					<th>
						{% if app.request.get('order_dir') == 'ASC' and app.request.get('order_by') == 'numero' %}
							<a href="{{ path('groupe.admin.list', {'order_by': 'numero', 'order_dir': 'DESC'}) }}">
						{%  else %}
							<a href="{{ path('groupe.admin.list', {'order_by': 'numero', 'order_dir': 'ASC'}) }}">
						{% endif %}
							Numero
						{% if app.request.get('order_by') == 'numero'  %}
							{% if app.request.get('order_dir') == 'ASC' %}
								<span class="caret"></span>
							{%else%}
								<span class="dropup">
    								<span class="caret"></span>
								</span>
							{% endif %}
						{% endif %}
						</a>
					</th>

					<th>
						{% if app.request.get('order_dir') == 'ASC' and app.request.get('order_by') == 'nom' %}
							<a href="{{ path('groupe.admin.list', {'order_by': 'nom', 'order_dir': 'DESC'}) }}">
						{%  else %}
							<a href="{{ path('groupe.admin.list', {'order_by': 'nom', 'order_dir': 'ASC'}) }}">
						{% endif %}
							Nom
						{% if app.request.get('order_by') == 'nom'  %}
							{% if app.request.get('order_dir') == 'ASC' %}
								<span class="caret"></span>
							{%else%}
								<span class="dropup">
    								<span class="caret"></span>
								</span>
							{% endif %}
						{% endif %}
						</a>
					</th>

					<th>
						{% if app.request.get('order_dir') == 'ASC' and app.request.get('order_by') == 'classe_open' %}
							<a href="{{ path('groupe.admin.list', {'order_by': 'classe_open', 'order_dir': 'DESC'}) }}">
						{%  else %}
							<a href="{{ path('groupe.admin.list', {'order_by': 'classe_open', 'order_dir': 'ASC'}) }}">
						{% endif %}
							Places ouvertes
						{% if app.request.get('order_by') == 'classe_open'  %}
							{% if app.request.get('order_dir') == 'ASC' %}
								<span class="caret"></span>
							{%else%}
								<span class="dropup">
    								<span class="caret"></span>
								</span>
							{% endif %}
						{% endif %}
						
					</th>
					<th>Scénariste</th>
					<th>Chef de groupe</th>
				</tr>
			</thead>
			<tbody>
			{% for groupe in groupes %}
				<tr>
					<td><a href="{{ path('groupe.update', {'index':groupe.id}) }}">{{ groupe.numero }}</a></td>
					<td><a href="{{ path('groupe.detail', {'index':groupe.id}) }}">{{ groupe.nom }}</a></td>
					<td>{{ groupe.classeOpen }}{% if is_granted('ROLE_ADMIN') %}&nbsp;(<a href=" {{ path('groupe.place', {'index':groupe.id}) }}">Modifier</a>){% endif %} </td>
					<td>{{ groupe.scenariste.username|default('pas de scénariste') }}</td>
					<td>{{ groupe.responsable.username|default('pas de responsable') }}</td>
				</tr>
			{% endfor %}
			</tbody>
		</table>
		
		{{ paginator|raw }}
	</div>

{% endblock content %}





