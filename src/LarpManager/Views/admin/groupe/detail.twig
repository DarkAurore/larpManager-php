{% extends "layout.twig" %}



{% block content %}

	<ol class="breadcrumb">
		<li><a href="{{ path('homepage') }}">Accueil</a></li>
		{% if is_granted('ROLE_ADMIN', app.user) %}<li><a href="{{ path("groupe.admin.list") }}">Liste des groupes</a></li>{% endif %}
		<li class="active">Détail d'un groupe</li>
	</ol>
	
<div class="container-fluid">
	<div class="row">
		<div class="col-xs-12 col-md-6">
		
						
			<div class="well well-sm bs-component">
				<h4>
					{{ groupe.numero|default('?') }} - {{ groupe.nom }}
				</h4>
			</div>			
		  						    		
	    	<div class="list-group">
	    		
	    		<div class="list-group-item">
		    		<h4 class="list-group-item-heading">Description <small>(Visible par tous)</small></h4>
    				<p class="list-group-item-text">
    				{% if not groupe.description %}
    					<span class="glyphicon glyphicon-info-sign" aria-hidden="true"></span>
    					Attention, ce groupe n'a pas de description.
    				{% else %}
    					{{ groupe.description|markdown }}
    				{% endif %}
    				</p>
   	    		</div>
						
	    		<div class="list-group-item">
	    			<h4 class="list-group-item-heading">Territoire</h4>
	    			
	    			<p class="list-group-item-text">
	    				{% if not groupe.territoire %}
    					<span class="glyphicon glyphicon-info-sign" aria-hidden="true"></span>
    					Attention, ce groupe n'a pas de territoire.
    				{% else %}
    					{{ groupe.territoire.nom }}
    				{% endif %}
	    			</p>
	    		</div>
	    			
	    		<div class="list-group-item">
		    		<h4 class="list-group-item-heading">Scénariste</h4>
    				<p class="list-group-item-text">
    					{% if not groupe.scenariste %}
    						<span class="glyphicon glyphicon-info-sign" aria-hidden="true"></span>
	    					Attention, ce groupe n'a pas de scénariste.
    					{% else %}
    						{{ groupe.scenariste.username }}
    					{% endif %}
    				</p>
    				<p class="list-group-item-text">
    					<span class="glyphicon glyphicon-envelope" aria-hidden="true"></span>
    					<a href="#">Contacter par mail</a>
    				</p>
	    		</div>
	    			
	    		<div class="list-group-item">
	    			<h4 class="list-group-item-heading">Membres du groupe</h4>
	    			<p class="list-group-item-text">
	    				<ul>
	    				{% if groupe.responsable %}<li><strong>{{ groupe.responsable.username }}</strong>&nbsp;(Responsable du groupe)</li>{% endif %}
	    				</ul>
	    				<table class="table">
	    					<thead>
	    						<tr>
	    							<th>User</th>
	    							<th>Email</th>
	    							<th>Personnage</th>
    								<th></th>
	    						</tr>
	    					</thead>
	    					<tbody>
							{% for participant in groupe.participants %}
								<tr>
									<td>{{ participant }}</td>
									<td>{{ participant.user.email }}</td>
									<td>
										{% if participant.personnage %}
											<a href="{{ path('personnage.admin.detail', {'personnage': participant.personnage.id}) }}">{{ participant.personnage.publicName }}</a>
										{% else %}
											Ne dispose pas encore de personnage
										{% endif %}
									</td>
									<td><a href="{{ path('groupe.admin.participant.remove', {'groupe': groupe.id, 'participant': participant.id}) }}">Retirer</a></td>
								</tr>
							{% endfor %}
							</tbody>
						</table>
	    			</p>
	    		</div>
	    			
	    		<div class="list-group-item">
		    		<h4 class="list-group-item-heading">Code</h4>
    				<p class="list-group-item-text">
    					<strong>{{ groupe.code }}</strong>
    				</p>
    				<p class="list-group-item-text">
    					Ce code permet à des joueurs invité par le chef de groupe de participer au groupe.
    				</p>
	    		</div>
	    			
	    		<div class="list-group-item">
		    		<h4 class="list-group-item-heading">Jeu stratégique</h4>
    				<p class="list-group-item-text">
    				{% if groupe.jeuStrategique %}
    					<span class="glyphicon glyphicon-ok-circle" aria-hidden="true"></span>
		    			participe au jeu stratégique.
		    		{% else %}
    					ne participe pas au jeu stratégique.
    				{% endif %}
		    		</p>
	    		</div>
	    			
	    		<div class="list-group-item">
    				<h4 class="list-group-item-heading">Jeu maritime</h4>
    				<p class="list-group-item-text">
    				{% if groupe.jeuMaritime %}
    					<span class="glyphicon glyphicon-ok-circle" aria-hidden="true"></span>
		    			participe au jeu maritime.
		    		{% else %}
    					ne participe pas au jeu maritime.
    				{% endif %}
		    		</p>
		    	</div>
		    		
		    	<div class="list-group-item">
    				<h4 class="list-group-item-heading">Composition du groupe</h4>
    				<p class="list-group-item-text"><strong>Nombre de place ouverte : </strong>{{ groupe.classeOpen }}</p>
    				<p class="list-group-item-text">
    					{% if groupe.classes|length == 0 %}
    					<span class="glyphicon glyphicon-info-sign" aria-hidden="true"></span>
	    					Attention, ce groupe n'a pas de classes définies.
    					{% else %}
    						{{ groupe.classes|join(', ') }}
    					{% endif %}
    				</p>
    			</div>
    			
    			<div class="list-group-item">
    				<h4 class="list-group-item-heading">Gns</h4>
					
					<p class="list-group-item-text">
						{{ groupe.gns|join(', ') }}
					</p>
				</div>
    				    				

	  			<div class="list-group-item">
		  			<div class="btn-group" role="group" aria-label="...">
		  				<a  class="btn btn-primary" role="button" href="{{ path('groupe.update', {index : groupe.id}) }}">Modifier</a>
					</div>
				</div>
  			</div>
		</div>
		
		<div class="col-xs-12 col-md-6">
			<div class="panel panel-default">
				<div class="panel-heading">Background</div>
				<div class="panel-body">
					<a href="{{ path('background.add', {'groupe': groupe.id}) }}">Ajouter un élément de background</a>
				</div>
				<div class="list-group">
					{% for background in groupe.backgrounds %}
						<div class="list-group-item">
			    			
			    			<p class="list-group-item-text text-warning">
			    				{{ background.visibility|explainVisibility }}
			    			</p>
			    			<p class="list-group-item-text">
			    				{{ background.text|markdown }}
			    			</p>
			    			<p class="list-group-item-text">
		    					<a href="{{ path('background.update', {'groupe': groupe.id, 'background': background.id, 'groupe': groupe.id}) }}">Modifier le background</a>
		    				</p>
			    		</div>
					{% endfor %}
				</div>	
			</div>
		</div>
	</div>
</div>
	
			
{% endblock %}
