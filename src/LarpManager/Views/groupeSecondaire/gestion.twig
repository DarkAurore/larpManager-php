{% extends "layout.twig" %}

{% block title %}Groupe secondaire {{groupeSecondaire.label }}{% endblock title %}

{% block content %}

<ol class="breadcrumb">
	<li><a href="{{ path('homepage')  }}">Accueil</a></li>
	<li class="active">{{ groupeSecondaire.label }}</li>
</ol>

<div class="panel panel-default">
	<div class="panel-body">
	
		<div class="header">
			<h5>Description</h5>
		</div>
		
		<p>{{ groupeSecondaire.description|markdown }}</p>
		
		<div class="header">
			<h5>Liste des postulants</h5>
		</div>
		<blockquote>
			<p>Voici la liste des personnages ayant postulé pour rejoindre votre groupe secondaire. Vous avez la possibilité d'accepter la demande, de la refuser ou de laisser le personnage parmis les postulants</p>
		</blockquote>
		<ul class="list-group">
		{% for postulant in groupeSecondaire.postulants %}
			<div class="list-group-item">
				<div class="list-group-item-heading">
					<strong>{{ postulant.personnage.surnom }}</strong>
					{% if groupeSecondaire.secondaryGroupType.label == 'Religion' %}
						Religion(s) du postulant :
						<ul>
						{% for personnageReligion in postulant.personnage.personnagesReligions %}
							<li>{{ personnageReligion.religion.label }} - {{ personnageReligion.religionLevel.label }}</li>
						{% endfor %}
						</ul>
					{% endif %}
				</div>
				<div class="list-group-item-text">
					{{ postulant.explanation|markdown }}
				</div>
				<a class="btn btn-primary" 
					href="{{ path('groupeSecondaire.gestion.response', {'groupe': groupeSecondaire.id, 'postulant': postulant.id }) }}">
					Répondre</a>
				<a class="btn btn-primary" 
					href="{{ path('groupeSecondaire.gestion.accept', {'groupe': groupeSecondaire.id, 'postulant': postulant.id }) }}">
					Accepter</a>
				<a class="btn btn-default" 
					href="{{ path('groupeSecondaire.gestion.wait', {'groupe': groupeSecondaire.id, 'postulant': postulant.id }) }}">
					Mettre en attente</a>
				<a class="btn btn-danger" 
					href="{{ path('groupeSecondaire.gestion.reject', {'groupe': groupeSecondaire.id, 'postulant': postulant.id }) }}">
					Rejeter</a>
			</div>
		{% endfor %}
		</ul>
		
		<div class="header">
			<h5>Liste des membres</h5>
		</div>
		
		<div class="list-group">
		{% for membre in groupeSecondaire.membres %}
			<div class="list-group-item">
				<div class="list-group-item-heading">
					<strong>{{ membre.personnage.surnom }}</strong>
				</div>
			</div>
		{% endfor %}
		</div>
	</div>
</div>
{% endblock content %}